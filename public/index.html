<!DOCTYPE html>
<html>        
  <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/index.css">
        <title>Discord Webhooks</title>
    </head>
    <body>
        <div align="center" class="sendmessage">
            <br/>
        Webhook Username: <br/><input type="text" id="username" required=true><br/><br/> 
        Webhook URL: <br/><input type="text" id="webhook_url" required=true><br/><br/>
        Avatar URL: <br/><input type="text" id="avatar_url" required=true><br/><br/>
        Message: <br/><input type="text" id="message" required=true><br/><br/>
        </div>
        <div align="center" class="sendembed">
            <br/>
        Embed Title: <br/><input type="text" id="embed_title"><br/><br/> 
        Embed Description: <br/><input type="text" id="embed_description"><br/><br/>
        Embed Color: <br/><input type="text" id="embed_color"><br/><br/>
        Embed Author: <br/><input type="text" id="embed_author"><br/><br/>
        Embed Author Avatar: <br/><input type="text" id="embed_author_avatar_url"><br/><br/>
        Embed Image: <br><input type="text" id="embed_image">
      </div>

        <button type="submit" id="submit" onclick="sendMessage()"> Send! </button>
    </body>
    <script>
        async function sendMessage() {
          var request = new XMLHttpRequest();
          request.open("POST", document.getElementById("webhook_url").value);

          request.setRequestHeader('Content-type', 'application/json');
          if (document.getElementById("webhook_url").value == "") {
            document.getElementById("webhook_url").focus()
            alert("Give the webhook url!")
            return
        }

        if (document.getElementById("message").value == "") {
        document.getElementById("message").focus()
        alert("Cannot send an empty message")
        return
    }
        var params = {
            username: document.getElementById("username").value,
            avatar_url: document.getElementById("avatar_url").value,
            content: document.getElementById("message").value,
            embeds: [{
                title: document.getElementById("embed_title").value,
                description: document.getElementById("embed_description").value,
                color: parseInt(document.getElementById("embed_color").value),
                author: {
                  name: document.getElementById("embed_author").value,
                  icon_url: document.getElementById("embed_author_avatar_url").value
                },
                image: {
                  url: document.getElementById("embed_image").value
                }
              }]
            }
          await request.send(JSON.stringify(params))
          alert("Successful!")
          document.getElementById("message").value = ""
          document.getElementById("webhook_url").value = ""
          document.getElementById("avatar_url").value = ""
          document.getElementById("username").value = ""
          document.getElementById("embed_title").value = ""
          document.getElementById("embed_description").value = ""
          document.getElementById("embed_color").value = ""
          document.getElementById("embed_author").value = ""
        }
      </script>
</html>
